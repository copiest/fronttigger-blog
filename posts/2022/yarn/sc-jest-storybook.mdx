---
title: styled-components + jest + storybook 환경 구성하기 (feat. 디자인 시스템) #required
tags:
  - yarn
  - typescript
  - rollup
  - react
  - styled-components
  - jest
  - storybook
  - designsystem
published: true # required
date: '2022. 4. 29' # required
description: '베리베리 스트로베리의 두번째 이야기 ✌️' # required
thumbnailImg: '/thumbnail/2022/04/yarn/yarn-berry.png' # required
---

import Image from './src/components/image'

[이전 글](https://tigger.dev/2022/yarn/berry-ts-rollup-react)에서 yarn berry + typescript + rollup + react를 활용하여 환경구성을 진행했었다.

그 다음 글이 제목과도 같은 추가적인 몇가지에 대한 글로 예고를 했었는데 흐름에 맞게 바로 반강제(?)로 진행하게 되었다.

이전 글의 결론은 React 컴포넌트를 만들어서 외부 프로젝트에서 사용하는 것 까지 진행했었다.

그래서 이번엔 styled-components를 통해 컴포넌트를 꾸미고, jest로 그걸 테스트하고, 스토리북을 통해 문서화까지 진행한 경험을 공유하려한다.

### styled-components setup

styled components를 사용하기 위해서는 먼저 디자인 시스템을 사용할 프로젝트를 위해 peerDependencies를 추가해야한다.

#### peerDependencies 추가

```
yarn add -P styled-components
```

추가가 되었다면 이제 타입스크립트를 대응하기 위해 devDependencies에 의존성을 추가한다.

#### devDependencies 추가

```
yarn add -D @types/styled-components
```

이렇게 되면 개발 준비 자체는 다 끝!

만약 여기서 컴포넌트에 대한 네이밍을 통한 디버깅을 용이하게 할 수 있다

#### babel-plugin-styled-components 의존성 추가

```
yarn add -D babel-plugin-styled-components
```

```
// .babelrc

{
  "plugins": ["babel-plugin-styled-components"]
}
```

자 그러면 디버깅까지 준비가 끝났다.

이제 한 번 간단한 버튼 컴포넌트를 통해 테스트해보자

```
// src/button/index.tsx

import React, { PropsWithChildren } from 'react'

import styled from 'styled-components'

interface ButtonProps {
  color?: string
}

const ButtonComponent = styled.button<ButtonProps>`
  color: ${({ color }) => color || 'black'};
`

function Button({ color, children }: PropsWithChildren<ButtonProps>) {
  return <ButtonComponent color={color}>{children}</ButtonComponent>
}

export default Button
```

버튼 완성!

```
import { Button } from '@fronttigger/design-system';

function App() {
  return (
    <div className='App'>
      <header className='App-header'>
        <Button color='red'>버튼</Button>
      </header>
    </div>
  );
}

export default App;
```

@@ 스타일드 이미지 @@

완벽하게 의도한대로 동작한다!

이제 styled-components를 통해 컴포넌트를 개발할 수 있다.
